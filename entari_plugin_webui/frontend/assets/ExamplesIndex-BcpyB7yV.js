import{b as A,d as q,_ as G,a as E,u as j,c as N,e as v,o as p,f as Y,n as U,g as m,r as H,h as W,w as J,i as y,j as K,k as a,l as o,E as Q,F as w,m as X,p as n,t as Z,q as ee,s as k,v as le,x as ae,y as te,z as oe,A as C,B as ue,C as g,D as ne,G as D,H as se,I as de}from"./index-CiK7xBkD.js";import{E as re}from"./el-input-number-Cib2fQjk.js";import{E as pe}from"./el-card-9u0QYif0.js";import{E as ie,a as me}from"./el-table-column-CYdOAsOl.js";const ve=A({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:q(String),default:"solid"}}),fe=E({name:"ElDivider"}),_e=E({...fe,props:ve,setup(h){const d=h,e=j("divider"),f=N(()=>e.cssVar({"border-style":d.borderStyle}));return(r,x)=>(p(),v("div",{class:U([m(e).b(),m(e).m(r.direction)]),style:W(m(f)),role:"separator"},[r.$slots.default&&r.direction!=="vertical"?(p(),v("div",{key:0,class:U([m(e).e("text"),m(e).is(r.contentPosition)])},[H(r.$slots,"default")],2)):Y("v-if",!0)],6))}});var Ve=G(_e,[["__file","divider.vue"]]);const be=J(Ve),ye={class:"card-header"},ge=E({__name:"ExamplesIndex",setup(h){const d=y(!1),e=y({id:0,name:"config",type:"ws",host:"127.0.0.1",port:5140,path:"satori",ignoreSelfMessage:!0,logLevel:"INFO",prefix:"/",autoReload:!0,echo:!0,inspect:!0}),f=K(),r=y(["ws","websocket","wh","webhook"]),x=y(["DEBUG","INFO","WARNING","ERROR","CRITICAL"]),c=N(()=>`basic:
  network:
    - type: ${e.value.type}
      host: "${e.value.host}"
      port: ${e.value.port}
      path: "${e.value.path}"
  ignore_self_message: ${e.value.ignoreSelfMessage}
  log_level: ${e.value.logLevel}
  prefix: ["${e.value.prefix}"]
plugins:
  $prelude:
    - ::auto_reload
  .record_message: {}
  ::auto_reload:
    watch_dirs: ["."]
  ::echo: ${e.value.echo?"{}":"false"}
  ::inspect: ${e.value.inspect?"{}":"false"}
`),F=async()=>{if(!e.value.id){g.error("请填写实例ID");return}if(!e.value.name){g.error("请填写实例名称");return}const I={id:e.value.id,name:e.value.name,type:e.value.type,host:e.value.host,port:e.value.port,path:e.value.path,data:c.value,filename:`${e.value.name}.yml`};try{await ne.post("http://127.0.0.1:5140/api/menus",I,{headers:{"Content-Type":"application/json"}}),g.success("实例创建成功"),f.addInstance({id:e.value.id,name:e.value.name,type:e.value.type,host:e.value.host,port:e.value.port,state:"已停止",path:e.value.path}),d.value=!1}catch(l){console.error("创建实例失败:",l),g.error("创建实例失败，请检查后端服务")}},L=()=>{e.value={id:0,name:"config",type:"ws",host:"127.0.0.1",port:5140,path:"satori",ignoreSelfMessage:!0,logLevel:"INFO",prefix:"/",autoReload:!0,echo:!0,inspect:!0}},R=()=>{L(),d.value=!0};return(I,l)=>{const _=ee,s=me,T=X,B=ie,M=pe,i=te,u=ae,V=be,S=se,$=oe,z=re,b=ue,O=le,P=Q;return p(),v(w,null,[a(M,null,{header:o(()=>[k("span",ye,[l[16]||(l[16]=k("p",null,"实例概览",-1)),a(_,{onClick:R},{default:o(()=>l[15]||(l[15]=[n("添加实例")])),_:1,__:[15]})])]),default:o(()=>[a(B,{data:m(f).instances,style:{width:"100%"},"empty-text":"暂无实例"},{default:o(()=>[a(s,{prop:"id",label:"实例ID",width:"120"}),a(s,{prop:"name",label:"实例名称",width:"150"}),a(s,{prop:"type",label:"网络类型",width:"120"}),a(s,{prop:"host",label:"服务器地址"}),a(s,{prop:"port",label:"端口",width:"100"}),a(s,{prop:"path",label:"路径",width:"120"}),a(s,{prop:"state",label:"状态",width:"100"},{default:o(({row:t})=>[a(T,{type:t.state==="运行中"?"success":"danger"},{default:o(()=>[n(Z(t.state),1)]),_:2},1032,["type"])]),_:1}),a(s,{label:"操作",width:"120"},{default:o(()=>[a(_,{size:"small"},{default:o(()=>l[17]||(l[17]=[n("启动")])),_:1,__:[17]})]),_:1})]),_:1},8,["data"])]),_:1}),a(P,{modelValue:d.value,"onUpdate:modelValue":l[14]||(l[14]=t=>d.value=t),title:"添加实例",width:"60vw"},{footer:o(()=>[a(_,{onClick:l[13]||(l[13]=t=>d.value=!1)},{default:o(()=>l[22]||(l[22]=[n("取消")])),_:1,__:[22]}),a(_,{type:"primary",onClick:F},{default:o(()=>l[23]||(l[23]=[n("创建实例")])),_:1,__:[23]})]),default:o(()=>[a(O,{model:e.value,"label-width":"120px"},{default:o(()=>[a(u,{label:"实例ID",required:""},{default:o(()=>[a(i,{modelValue:e.value.id,"onUpdate:modelValue":l[0]||(l[0]=t=>e.value.id=t),placeholder:"请输入唯一实例ID",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),a(u,{label:"实例名称"},{default:o(()=>[a(i,{modelValue:e.value.name,"onUpdate:modelValue":l[1]||(l[1]=t=>e.value.name=t),placeholder:"请输入实例名称",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),a(V,null,{default:o(()=>l[18]||(l[18]=[n("网络配置")])),_:1,__:[18]}),a(u,{label:"网络类型"},{default:o(()=>[a($,{modelValue:e.value.type,"onUpdate:modelValue":l[2]||(l[2]=t=>e.value.type=t),placeholder:"请选择网络类型"},{default:o(()=>[(p(!0),v(w,null,C(r.value,t=>(p(),D(S,{key:t,label:t,value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(u,{label:"主机地址"},{default:o(()=>[a(i,{modelValue:e.value.host,"onUpdate:modelValue":l[3]||(l[3]=t=>e.value.host=t),placeholder:"请输入主机地址"},null,8,["modelValue"])]),_:1}),a(u,{label:"端口号"},{default:o(()=>[a(z,{modelValue:e.value.port,"onUpdate:modelValue":l[4]||(l[4]=t=>e.value.port=t),min:1,max:65535},null,8,["modelValue"])]),_:1}),a(u,{label:"路径"},{default:o(()=>[a(i,{modelValue:e.value.path,"onUpdate:modelValue":l[5]||(l[5]=t=>e.value.path=t),placeholder:"请输入路径"},null,8,["modelValue"])]),_:1}),a(V,null,{default:o(()=>l[19]||(l[19]=[n("基础配置")])),_:1,__:[19]}),a(u,{label:"忽略自身消息"},{default:o(()=>[a(b,{modelValue:e.value.ignoreSelfMessage,"onUpdate:modelValue":l[6]||(l[6]=t=>e.value.ignoreSelfMessage=t)},null,8,["modelValue"])]),_:1}),a(u,{label:"日志级别"},{default:o(()=>[a($,{modelValue:e.value.logLevel,"onUpdate:modelValue":l[7]||(l[7]=t=>e.value.logLevel=t),placeholder:"请选择日志级别"},{default:o(()=>[(p(!0),v(w,null,C(x.value,t=>(p(),D(S,{key:t,label:t,value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(u,{label:"指令前缀"},{default:o(()=>[a(i,{modelValue:e.value.prefix,"onUpdate:modelValue":l[8]||(l[8]=t=>e.value.prefix=t),placeholder:"请输入指令前缀"},null,8,["modelValue"])]),_:1}),a(V,null,{default:o(()=>l[20]||(l[20]=[n("插件配置")])),_:1,__:[20]}),a(u,{label:"自动重载插件"},{default:o(()=>[a(b,{modelValue:e.value.autoReload,"onUpdate:modelValue":l[9]||(l[9]=t=>e.value.autoReload=t)},null,8,["modelValue"])]),_:1}),a(u,{label:"Echo插件"},{default:o(()=>[a(b,{modelValue:e.value.echo,"onUpdate:modelValue":l[10]||(l[10]=t=>e.value.echo=t)},null,8,["modelValue"])]),_:1}),a(u,{label:"Inspect插件"},{default:o(()=>[a(b,{modelValue:e.value.inspect,"onUpdate:modelValue":l[11]||(l[11]=t=>e.value.inspect=t)},null,8,["modelValue"])]),_:1}),a(V,null,{default:o(()=>l[21]||(l[21]=[n("生成的YML配置")])),_:1,__:[21]}),a(u,null,{default:o(()=>[a(i,{modelValue:c.value,"onUpdate:modelValue":l[12]||(l[12]=t=>c.value=t),type:"textarea",rows:10,readonly:"",style:{"font-family":"monospace"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}}}),xe=de(ge,[["__scopeId","data-v-d00155f2"]]);export{xe as default};
